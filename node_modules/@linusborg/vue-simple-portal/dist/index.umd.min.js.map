{"version":3,"file":"index.umd.min.js","sources":["../../node_modules/nanoid/non-secure/index.js","../../src/config.js","../../src/components/TargetContainer.js","../../src/components/Portal.js","../../src/index.js"],"sourcesContent":["var url = 'bjectSymhasOwnProp-0123456789ABCDEFGHIJKLMNQRTUVWXYZ_dfgiklquvxz'\n\n/**\n * Generate URL-friendly unique ID. This method use non-secure predictable\n * random generator.\n *\n * By default, ID will have 21 symbols to have a collision probability similar\n * to UUID v4.\n *\n * @param {number} [size=21] The number of symbols in ID.\n *\n * @return {string} Random string.\n *\n * @example\n * const nanoid = require('nanoid/non-secure')\n * model.id = nanoid() //=> \"Uakgb_J5m9g-0JDMbcJqL\"\n *\n * @name nonSecure\n * @function\n */\nmodule.exports = function (size) {\n  size = size || 21\n  var id = ''\n  while (0 < size--) {\n    id += url[Math.random() * 64 | 0]\n  }\n  return id\n}\n","import id from 'nanoid/non-secure'\n\nconst config = {\n  selector: `vue-portal-target-${id()}`,\n}\nexport default config\n\nexport const setSelector = selector => (config.selector = selector)\n\nexport const isBrowser =\n  typeof window !== 'undefined' && typeof document !== undefined\n","import Vue from 'vue'\nexport default Vue.extend({\n  // as an abstract component, it doesn't appear in\n  // the $parent chain of components.\n  // which means the next parent of any component rendered inside of this oen\n  // will be the parent from which is was portal'd\n  abstract: true,\n  name: 'PortalOutlet',\n  props: ['nodes', 'tag'],\n  data: vm => ({\n    updatedNodes: vm.nodes,\n  }),\n  render(h) {\n    const nodes = this.updatedNodes && this.updatedNodes()\n    if (!nodes) return h()\n    return nodes.length < 2 && !nodes[0].text\n      ? nodes\n      : h(this.tag || 'DIV', nodes)\n  },\n  destroyed() {\n    const { $el: el } = this\n    el.parentNode.removeChild(el)\n  },\n})\n","import Vue from 'vue'\nimport config, { isBrowser } from '../config'\nimport TargetContainer from './TargetContainer'\n\nexport default Vue.extend({\n  name: 'VueSimplePortal',\n  props: {\n    disabled: {\n      type: Boolean,\n    },\n    prepend: {\n      type: Boolean,\n    },\n    selector: {\n      type: String,\n      default: () => `#${config.selector}`,\n    },\n    tag: {\n      type: String,\n      default: 'DIV',\n    },\n  },\n  render(h) {\n    if (this.disabled) {\n      const nodes = this.$scopedSlots && this.$scopedSlots.default()\n      if (!nodes) return h()\n      return nodes.length < 2 && !nodes[0].text ? nodes : h(this.tag, nodes)\n    }\n    return h()\n  },\n  created() {\n    if (!this.getTargetEl()) {\n      this.insertTargetEl()\n    }\n  },\n  updated() {\n    // We only update the target container component\n    // if the scoped slot function is a fresh one\n    // The new slot syntax (since Vue 2.6) can cache unchanged slot functions\n    // and we want to respect that here.\n    this.$nextTick(() => {\n      if (!this.disabled && this.slotFn !== this.$scopedSlots.default) {\n        this.container.updatedNodes = this.$scopedSlots.default\n      }\n      this.slotFn = this.$scopedSlots.default\n    })\n  },\n  beforeDestroy() {\n    this.unmount()\n  },\n  watch: {\n    disabled: {\n      immediate: true,\n      handler(disabled) {\n        disabled ? this.unmount() : this.$nextTick(this.mount)\n      },\n    },\n  },\n  methods: {\n    // This returns the element into which the content should be mounted.\n    getTargetEl() {\n      if (!isBrowser) return\n      return document.querySelector(this.selector)\n    },\n    insertTargetEl() {\n      if (!isBrowser) return\n      const parent = document.querySelector('body')\n      const child = document.createElement(this.tag)\n      child.id = this.selector.substring(1)\n      parent.appendChild(child)\n    },\n    mount() {\n      const targetEl = this.getTargetEl()\n      const el = document.createElement('DIV')\n      if (this.prepend && targetEl.firstChild) {\n        targetEl.insertBefore(el, targetEl.firstChild)\n      } else {\n        targetEl.appendChild(el)\n      }\n\n      this.container = new TargetContainer({\n        el,\n        parent: this,\n        propsData: {\n          tag: this.tag,\n          nodes: this.$scopedSlots.default,\n        },\n      })\n    },\n    unmount() {\n      if (this.container) {\n        this.container.$destroy()\n        delete this.container\n      }\n    },\n  },\n})\n","import Vue from 'vue'\nimport Portal from './components/Portal'\nimport config, { setSelector } from './config'\n\nfunction install(_Vue, options = {}) {\n  _Vue.component(options.name || 'portal', Portal)\n  if (options.defaultSelector) {\n    setSelector(options.defaultSelector)\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue && window.Vue === Vue) {\n  // plugin was inlcuded directly in a browser\n  Vue.use(install)\n}\n\nexport default install\nexport { Portal, setSelector, config }\n"],"names":["config","selector","size","id","Math","random","setSelector","isBrowser","window","undefined","document","Vue","extend","abstract","name","props","data","vm","updatedNodes","nodes","render","h","this","length","text","tag","destroyed","el","$el","parentNode","removeChild","disabled","type","Boolean","prepend","String","default","$scopedSlots","created","getTargetEl","insertTargetEl","updated","$nextTick","_this","slotFn","container","beforeDestroy","unmount","watch","immediate","handler","mount","methods","querySelector","parent","child","createElement","substring","appendChild","targetEl","firstChild","insertBefore","TargetContainer","propsData","$destroy","install","_Vue","options","component","Portal","defaultSelector","use"],"mappings":";;;;;;;;2fAAA,ICEMA,EAAS,CACbC,qCDiBe,SAAUC,GACzBA,EAAOA,GAAQ,GAEf,IADA,IAAIC,EAAK,GACF,EAAID,KACTC,GAxBM,mEAwBoB,GAAhBC,KAAKC,SAAgB,GAEjC,OAAOF,ECvBwBA,KAIpBG,EAAc,SAAAL,UAAaD,EAAOC,SAAWA,GAE7CM,EACO,oBAAXC,aAA8CC,yBAAbC,uBAAAA,aCT3BC,EAAIC,OAAO,CAKxBC,UAAU,EACVC,KAAM,eACNC,MAAO,CAAC,QAAS,OACjBC,KAAM,SAAAC,SAAO,CACXC,aAAcD,EAAGE,QAEnBC,gBAAOC,OACCF,EAAQG,KAAKJ,cAAgBI,KAAKJ,sBACnCC,EACEA,EAAMI,OAAS,IAAMJ,EAAM,GAAGK,KACjCL,EACAE,EAAEC,KAAKG,KAAO,MAAON,GAHNE,KAKrBK,yBACeC,EAAOL,KAAZM,IACRD,EAAGE,WAAWC,YAAYH,QCjBfhB,EAAIC,OAAO,CACxBE,KAAM,kBACNC,MAAO,CACLgB,SAAU,CACRC,KAAMC,SAERC,QAAS,CACPF,KAAMC,SAERhC,SAAU,CACR+B,KAAMG,OACNC,QAAS,4BAAUpC,EAAOC,YAE5BwB,IAAK,CACHO,KAAMG,OACNC,QAAS,QAGbhB,gBAAOC,MACDC,KAAKS,SAAU,KACXZ,EAAQG,KAAKe,cAAgBf,KAAKe,aAAaD,iBAChDjB,EACEA,EAAMI,OAAS,IAAMJ,EAAM,GAAGK,KAAOL,EAAQE,EAAEC,KAAKG,IAAKN,GAD7CE,WAGdA,KAETiB,mBACOhB,KAAKiB,oBACHC,kBAGTC,mCAKOC,UAAU,WACRC,EAAKZ,UAAYY,EAAKC,SAAWD,EAAKN,aAAaD,UACtDO,EAAKE,UAAU3B,aAAeyB,EAAKN,aAAaD,SAElDO,EAAKC,OAASD,EAAKN,aAAaD,WAGpCU,8BACOC,WAEPC,MAAO,CACLjB,SAAU,CACRkB,WAAW,EACXC,iBAAQnB,GACNA,EAAWT,KAAKyB,UAAYzB,KAAKoB,UAAUpB,KAAK6B,UAItDC,QAAS,CAEPb,0BACOhC,SACEG,SAAS2C,cAAc/B,KAAKrB,WAErCuC,6BACOjC,OACC+C,EAAS5C,SAAS2C,cAAc,QAChCE,EAAQ7C,SAAS8C,cAAclC,KAAKG,KAC1C8B,EAAMpD,GAAKmB,KAAKrB,SAASwD,UAAU,GACnCH,EAAOI,YAAYH,KAErBJ,qBACQQ,EAAWrC,KAAKiB,cAChBZ,EAAKjB,SAAS8C,cAAc,OAC9BlC,KAAKY,SAAWyB,EAASC,WAC3BD,EAASE,aAAalC,EAAIgC,EAASC,YAEnCD,EAASD,YAAY/B,QAGlBkB,UAAY,IAAIiB,EAAgB,CACnCnC,GAAAA,EACA2B,OAAQhC,KACRyC,UAAW,CACTtC,IAAKH,KAAKG,IACVN,MAAOG,KAAKe,aAAaD,YAI/BW,mBACMzB,KAAKuB,iBACFA,UAAUmB,kBACR1C,KAAKuB,eCxFpB,SAASoB,EAAQC,OAAMC,yDAAU,GAC/BD,EAAKE,UAAUD,EAAQrD,MAAQ,SAAUuD,GACrCF,EAAQG,iBACVhE,EAAY6D,EAAQG,iBAIF,oBAAX9D,QAA0BA,OAAOG,KAAOH,OAAOG,MAAQA,GAEhEA,EAAI4D,IAAIN"}